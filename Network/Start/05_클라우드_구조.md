> 작성일 : 2024/02/16 (DAY13)

# 51. 클라우드 구조

- `클라우드(Cloud)`
  - 인터넷으로 연결된 기기가 제공하는 데이터나 앱, 서비스 등 인프라
  - 다양한 기능과 서비스를 이용할 수 있음

## 클라우드라는 용어의 유래

- 클라우드의 유래
  - '구름(cloud)'이라는 뜻의 영어에서 유래
  - 회선이나 통신망, 웹 서비스 기반, 빅데이터 저장 장소로 인터넷을 표현할 때 경계가 모호하고 실체가 정해지지 않는 이미지를 나타내기에 구름이 편리함
  - 현재는 인터넷을 이용한 컴퓨터 사용 형태를 클라우드 또는 클라우드 컴퓨팅이라고 함

## 네트워크로 연결된 기기가 클라우드를 구성

- `데이터센터`
  - 인터넷을 구성하는 네트워크와 이와 연결된 컴퓨터, 서버 등의 기기를 한데 모아 놓은 시설
  - 대량의 서버를 가동시키려고 서버 랙, 네트워크 회선, 전원/공조/방화/내진 설비 등을 갖춘 시설
  - AWS, MS 에저, 구글 클라우드 같은 주요 클라우드 서비스를 제공하는 플랫폼은 아마존, 마이크로소프트, 구글이 운영하는 세계적인 규모의 데이터센터이다.
  - 데이터센터의 시설만 이용하는 방식을 `하우징`, 서버까지 이용하는 방식을 `호스팅`이라고 한다.
- 클라우드 기술과 데이터센터 기술의 공통점
  - 서버와 네트워크 가상화, 분산형 데이터베이스, SaaS 같은 기술과 이용 형태에 따라 구성됨

# 52. 서버 가상화

## 서버 한 대로 여러 OS 등을 구성

- `서버 가상화`
  - 하나의 서버에서 여러 개의 CPU와 OS 등을 **논리적**으로 구성하는 기술
  - 이 때 가상 머신(VM)이라는 기술을 사용함
    - VM(Virtual Machine) : 한 컴퓨터에서 여러 개의 OS를 운용할 때 사용
    - 이를 적용해 하나의 서버에서 여러 개의 OS를 실행할 수 있음
  - 가상 서버를 통해 각각 용도에 맞는 전용 서버를 구성할 수 있음
  - 데이터센터의 호스팅(임대 서버)을 이용하면 사용자는 서버에 할당하는 비용을 절감 및 효율화할 수 있음
  - => 클라우드의 원형

## 가상화 종류

- `호스트 OS형`
  - 하드웨어에 설치된 OS(호스트 OS)에 가상 머신 소프트웨어를 설치하여 여러 OS(게스트 OS)를 실행함
- `하이퍼바이저형`
  - 하드웨어에 호스트 OS가 필요 없고, 그 대신 하이퍼바이저를 설치해서 여러 가상 머신을 실행함
  - `전가상화(Full-Virtualization)`
    - 하이퍼바이저가 호스트 시스템의 하드웨어를 완전히 가상화하여 가상 머신(VM)에 물리적 하드웨어를 모방
    - => 게스트 운영 체제는 실제 하드웨어 상에서 직접 실행되는 것처럼 작동할 수 있음
    - 호환성이 높고 다양한 운영 체제를 지원할 수 있으며, 게스트 운영 체제가 전가상화 기술을 인식하지 않아도 됨
  - `반가상화(Para-Virtualization)`
    -  하이퍼바이저가 게스트 운영 체제에 대한 가상화된 인터페이스를 제공하지만, 게스트 운영 체제는 수정된 운영 체제 커널을 사용하여 가상화된 하드웨어와 상호 작용함
    -  게스트 운영 체제의 커널이 가상화된 환경에서 실행되도록 수정되어야 한다. 이로 인해 일반적으로 게스트 운영 체제의 성능이 향상되고 오버헤드가 감소한다.
    -  반가상화는 전가상화보다 약간의 성능 향상을 제공하지만, 게스트 운영 체제의 수정이 필요하다는 점에서 구현 및 호환성에 제약이 있을 수 있음
- `컨테이너형`
  - 호스트 OS 위에 컨테이너 관리 소프트웨어를 설치하여, 논리적으로 컨테이너를 나누어 사용함
  - 컨테이너에는 게스트 OS나 가상하드웨어를 포함하지 않고 애플리케이션 동작을 위한 라이브러리와 애플리케이션 등으로 구성됨 => 이를 각각 개별 서버처럼 사용 가능
  - Docker, Linux VServer, OpenVZ 등이 있음

### 호스트 OS형

![호스트 OS형](image-30.png)

### hypervisor vs container

![hypervisor vs container](image-29.png)

# 53. 분산 기술

## 중앙 집중형과 분산형의 차이

컴퓨터 네트워크에서는 연결 유형과 관리 유형으로 네트워크를 분류한다. 관리 유형은 중앙 집중형과 분산형으로 나뉜다.

- `중앙 집중형`
  - 전체 네트워크 트래픽을 단일 지점에서 관리 => 제어가 쉽고 관리가 편리함
  - 관리 호스트가 다운되면 전체 네트워크가 다운됨
  - 네트워크의 확장성과 유연성도 제한됨
- `분산형`
  - 네트워크 전체를 중앙에서 관리하는 주체가 존재하지 않음
  - 각 노드(호스트 또는 라우터)는 각각 자율적으로 데이터 통신 및 패킷 교환을 수행함
  - 개별 호스트 또는 회선이 다운되어도 네트워크 전체의 가동은 멈추지 않음
  - 확장성과 유연성은 높아지지만, *통신을 위한 제어(프로토콜)가 복잡해지고 트래픽이 혼잡해지기 쉬움*

## 인터넷에서 활용되는 분산 기술

- DNS
  - 전 세계 도메인 이름과 IP 주소 대응표를 관리하는 분산 데이터베이스
  - 분산형 네트워크로 구현됨
  - 중앙 집중형으로는 이런 구조를 거의 실시간으로 관리하기가 불가능함

대규모 클라우드 서비스에서도 필요한 서버 리소스를 전 세계 데이터센터로 분산시킨다. 액세스가 집중될 때마다 서버를 증강하거나 축소시킬 수 있다. 

이러한 분산형 컴퓨팅은 장애에 강할 뿐만 아니라 시스템 가용성도 증가할 수 있다.

# 54. IaaS/PaaS/SaaS/DaaS

## IaaS, PaaS, SaaS 이용 형태의 차이

클라우드가 제공하는 서비스는 **이용 형태**에 따라 나눌 수 있다.

- `IaaS(Infrastructure as a Service)`
  - *하드웨어(서버)의 기본 구성(Infrastructure)을 지정하는 이용 형태*
  - CPU, 메모리, 하드디스크 등 일반적인 사양부터 머신 러닝, 시뮬레이션 등에 사용되는 클러스터 구성까지 선택 가능
  - 지정한 것 이외의 소프트웨어는 직접 구현함
- `PaaS(Platform as a Service)`
  - DB, 개발 환경 등 미들웨어라고 하는 *시스템 애플리케이션까지 포함하는 형태*
- `SaaS(Service as a Service)`
  - IaaS와 PaaS의 구성 요소가 아닌 *애플리케이션이나 기능만 이용하는 형태*
  - 클라우드상에서 구동되는 재고 관리, 전자상거래 사이트 기능, CAD, 디자인 소프트웨어 등
  - 판매되는 메일 소프트웨어가 아닌 지메일을 사용하는 것은 이메일 기능인 SaaS를 이용하는 것임

![Alt text](image-31.png)

## 클라우드의 OS를 이용하는 DaaS

- `DaaS(Desktop as a Service)`
  - *클라이언트 단말기의 OS를 SaaS처럼 이용하는 형태*
  - 연결하는 단말기가 변경되어도 같은 컴퓨터의 데스크톱 환경에서 작업할 수 있음

# Q&A

## AWS는 IaaS, PaaS, SaaS 중 어디에 해당할까?

AWS(Amazon Web Services)는 `IaaS(Infrastructure as a Service)`와 `PaaS(Platform as a Service)`를 제공한다. 

직접적으로 `SaaS(Software as a Service)`를 제공하지는 않는다. AWS는 클라우드 인프라를 제공하여 기업이 자체적으로 애플리케이션을 구축, 배포 및 관리할 수 있도록 도와주는데, 이는 SaaS와는 조금 다르다.

### EC2와 RDS는?

#### EC2

`Amazon Elastic Compute Cloud(Amazon EC2)`는 Amazon Web Services(AWS) 클라우드에서 온디맨드 확장 가능 컴퓨팅 용량을 제공한다. 원하는 수의 가상 서버를 구축하고 보안 및 네트워킹을 구성하며 스토리지를 관리할 수 있다. 트래픽 및 컴퓨팅 성능에 따라 용량을 늘리거나 줄일 수 있다.

따라서 `EC2`는 가상 서버, 스토리지, 네트워킹 및 기타 컴퓨팅 리소스와 같은 기본적인 인프라를 제공하는 `IaaS`에 해당한다. 

#### RDS

`Amazon Relational Database Service(Amazon RDS)`는 AWS 클라우드에서 관계형 데이터베이스를 더 쉽게 설치, 운영 및 확장할 수 있는 웹 서비스다. 이 서비스는 산업 표준 관계형 데이터베이스를 위한 경제적이고 크기 조절이 가능한 용량을 제공하고 공통 데이터베이스 관리 작업을 관리한다. Amazon RDS를 사용하면 번거로운 수동 작업을 처리할 필요가 없어 애플리케이션과 사용자에게 집중할 수 있다.

PaaS에서는 제공업체가 자체 인프라에서 하드웨어와 소프트웨어를 호스팅하고 이러한 플랫폼을 사용자에게 통합 솔루션, 솔루션 스택 또는 인터넷을 통한 서비스로 제공한다. 주로 개발자와 프로그래머에게 유용한 PaaS를 통해 사용자는 자체 애플리케이션을 개발, 실행 및 관리할 수 있으며, 이 과정에서 일반적으로 이러한 프로세스와 관련된 인프라 또는 플랫폼을 구축하고 유지 관리할 필요가 없다. 따라서 `RDS`는 `PaaS`에 해당한다.

#### 그 외 AWS의 서비스

EC2, S3 등은 IaaS에, Elastic Beanstalk, AWS Lambda 등이 PaaS에 해당한다.

> 참고
> - [AWS 기반 서비스형 소프트웨어(SaaS)](https://aws.amazon.com/ko/saas/)
> - [서비스형 인프라(IaaS)란 무엇인가요?](https://aws.amazon.com/ko/what-is/iaas/)
> - [IaaS, PaaS 및 SaaS 비교](https://www.redhat.com/ko/topics/cloud-computing/iaas-vs-paas-vs-saas)
> - [Amazon EC2란 무엇인가요?](https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/concepts.html)
> - [Amazon Relational Database Service(Amazon RDS)란 무엇입니까?](https://docs.aws.amazon.com/ko_kr/AmazonRDS/latest/UserGuide/Welcome.html)


---

> 작성일 : 2024/02/17 (DAY14)

# 55. 클라우드 컴퓨팅/온프레미스

## 도입할 때와 운영할 때 비용 차이

- `온프레미스`
  - 클라우드(클라우드 컴퓨팅)와 대응되는 용어
  - 서버 등을 소유하고 직접 관리하는 대신, *시설 내에서 운영하는 것을 의미함*
  - 클라우드 이전에는 업무 시스템 등을 운영할 때 오피스나 데이터센터 등에서 *물리적인 리소스를 소유*해야만 했음
  - 처음 도입할 때 설비 투자 등 큰 비용이 발생하고 운영할 때는 관리나 보수 비용 정도가 필요함
- `클라우드`
  - 물리적인 리소스를 소유하지 않고 인터넷에서 이용하는 형태
  - 월 이용료만으로 운영할 수 있음
  - 이용료는 계약 기간 내내 계속해서 발생함

## 시스템 변경이나 보안 대책의 특징

- `온프레미스`
  - 업무 시스템을 변경하거나 확장하려면 *물리적으로 하드웨어나 소프트웨어를 교체해야 함*
  - 보안 대책은 직접 시행해야 함
- `클라우드`
  - **관리 화면 조작**으로 즉시 가상 서버를 추가하거나 제거할 수 있음
  - 가상 서버 추가 및 제거는 네트워크 혼잡 상황에 따라 시간 설정으로 자동화할 수 있음
  - 기본적인 보안 대책은 이용료에 포함됨
  - *인터넷을 이용*해야 하기 때문에 고도의 보안이 꼭 필요한 용도에서는 불리할 수 있음

# 56. 에지 컴퓨팅

## 클라우드의 폐해

- 업무 핵심이 되는 시스템이나 데이터베이스 등이 클라우드 측 서버에 집중됨
  - **클라이언트-서버** 형태로 역할을 분담하므로 복잡한 업무도 효율적으로 처리할 수 있음
- IoT에서는 인터넷에 연결되는 단말기들이 *특정한 기능에 특화되어 있어 범용적인 처리에 약함*
  - => 서버 부하 증가, 응답 시간(레이턴시) 지연 문제
  - 실시간성이 중요한 IoT 기기 등에서는 네트워크 지연이 있으면 기능을 충분히 활용할 수 없음

## 에지 컴퓨팅을 이용한 부하 해소

- `에지 컴퓨팅`
  - 단말기 측 또는 단말기에 가까운 위치에 서버를 분산 배치하는 기술
  - 데이터 수집, 응답 처리, 상위 서버로 데이터나 요청을 보내기 전에 *전처리 등을 담당하는 서버를 인터넷의 에지 부분에 배치*
    - => 서버의 부하나 응답 시간 지연 등을 해소함
- 센서 네트워크, IoT 기기 등에서는 기지국 등에 에지 서버를 배치하여 실시간 처리 및 서버나 인터넷 트래픽의 부하 해소에 대처함

# 57. 컨테이너

## 애플리케이션 동작 환경을 구축하는 컨테이너 구조

- `컨테이너`
  - 하나의 OS 상에 여러 애플리케이션의 동작 환경을 가상으로 구축하는 기술
  - 게스트 OS를 제외하고 애플리케이션과 그 동작 환경을 컨테이너 엔진이 가상화해서 실행함
  - 각각의 가상화된 애플리케이션 및 동작 환경 => `컨테이너`
  - 호스트 OS의 기능을 이용하여 동작하므로, 동작이 가볍고 컨테이너를 교체하면서 유연한 환경을 구축할 수 있음
  - 각각의 컨테이너는 독립적으로 동작하기 때문에 다른 컨테이너에 직접 액세스할 수 없음
    - => 컨테이너 사이의 통신에는 컨테이너 엔진이 제공하는 **가상 네트워크 브리지**를 사용
    - 가상 네트워크 브리지 : 컨테이너마다 설정되는 가상 NIC, 가상 스위치, 가상 라우터 기능을 모은 가상 네트워크의 브리지 기능

## 도커와 쿠버네티스를 활용한 컨테이너

- `도커(Docker)`
  - 컨테이너 엔진의 대표적인 소프트웨어
  - 많은 애플리케이션과 동작 환경이 패키지화되어 있어, *손쉽게 애플리케이션 동작 환경을 구성*할 수 있음
  - 물리적 서버가 분리되어 있어도 같은 운영 체제라면 네트워크를 이용하여 하나의 시스템으로 관리하는 상호 연결이 가능함
- `쿠버네티스(Kubernetes)`
  - 컨테이너 엔진으로 구축된 컨테이너 관리를 자동화하는 오픈 소스 소프트웨어
  - 네트워크를 이용하여 여러 개의 컨테이너 엔진(도커)을 관리할 수 있는 소프트웨어
  - 컨테이너로 도커와 쿠버네티스를 사용하면 **웹 기반 마이크로서비스**를 구현하기 쉬움

![도커와 쿠버네티스](image-33.png)

# 58. 마이크로서비스

## 애플리케이션 개발 기법으로서 마이크로서비스

- 일체형/모놀리스
  - 애플리케이션을 하나의 소프트웨어로 구축
- `마이크로서비스`
  - 소규모 기능을 서버 서비스로 구현한 것
  - 애플리케이션을 개발하는 기법의 하나
  - 기능 요소별로 **모듈**을 개발하고 이들을 연계/조합해서 하나의 애플리케이션을 구축
  - 각 요소가 서버처럼 독립되어 있고 통신을 해서 기능이나 데이터를 교환함
  - 이러한 기법은 **서비스 지향 아키텍쳐(SOA)** 로서 이전부터 존재했지만, 기술과 인프라의 부족으로 실제로 보급하기에 용의치 않았음

![Monolithic vs MSA](image-32.png)

## 컨테이너 개발 기법으로서 마이크로서비스

네트워크 인프라의 정비, 하드웨어 기술의 발전, 서버 가상화 및 컨테이너 기술의 보급 등
</br>=> 마이크로서비스를 구현하기 쉬워짐

- HTTPS나 REST API를 이용해서 애플리케이션 및 서비스를 구현할 때 마이크로서비스를 적용함
- 도커 등 컨테이너 엔진을 쿠버네티스로 관리하는 개발 기법에서도 마이크로서비스 개념이 적용됨
  - 클라우드 서비스상의 가상 서버를 컨테이너로 구성
  - => 애플리케이션에 필요한 기능을 가상화로 캡슐화하고 쿠버네티스가 관리를 자동화함
  - 이런 개발 기법은 **데브옵스(DevOps)** 라고 하는 웹 서비스 개발에 필수적임

> - `모듈` : 인증이나 결제 등의 기능, AI 처리, 지도 표시 등 *애플리케이션을 구성하는 일반적인 기능을 실현하는 프로그램 단위*
> - `서비스 지향 아키텍처(SOA)` : 애플리케이션을 개발에서 필요한 기능을 설계하여 조립하는 것이 아니라, *필요한 기능을 서비스 단위로 생각하고 그것들을 구현하는 기능을 개발하는 사고방식*
> - `데브옵스(DevOps)` : 웹 서비스 등 기능 개선과 릴리스에 신속한 대응이 요구되는 시스템에서 ***개발과 운영이 밀접하게 연계**되어 기능 개발, 도입, 업데이트 등을 효율적으로 수행하는 방법*

# Q&A

## MSA(Microservices Architecture)의 장단점

### 장점

- 모듈성 및 유연성 : 각각의 서비스가 독립적으로 개발, 배포 및 관리되기 때문에 시스템이 모듈화되어 유지보수가 용이하고 유연성이 높아진다.

- 빠른 배포 및 릴리스 : 작은 서비스 단위로 개발되기 때문에 각 서비스의 변경 사항을 효율적으로 배포할 수 있다. 다른 서비스의 개발 중인 기능에 문제가 생겨서 배포가 늦어지더라도 릴리즈할 수 있다.

- 기술 다양성 및 선택의 자유 : 서비스마다 다른 기술 스택을 사용할 수 있어, 최적의 도구와 기술을 선택하여 각 서비스의 요구 사항을 충족시킬 수 있다.

- 확장성 : 서비스별로 독립적으로 확장이 가능하므로 특정 서비스의 부하가 증가해도 전체 시스템의 성능에 영향을 덜 줄 수 있다. 부하가 걸리는 서비스의 인프라만 증축하는 등 유연한 대처가 가능하다.

- 자율성 : 조직 그룹을 작게 유지하여 긴밀한 유대를 구축하고 효과적으로 협력할 수 있도록 함으로써 효과적으로 성장하고 확장할 수 있음

- 강건성 : 애플리케이션을 독립적으로 배포할 수 있는 개별 프로세스로 분할함으로써 애플리케이션의 견고성을 개선할 수 있다. 한 서비스가 다운되거나 재시작해야 하더라도 전체 서비스이 다운될 필요가 없다. => 복원력 증가
> - 강건성 : 예상되는 변동에 대응할 수 있는 시스템 능력
> - 복원력 : 생각지 못한 것에 적응하고 대응할 수 있는 능력

### 단점

- 운영 복잡성 : 서비스 간의 통신, 데이터 일관성 및 모니터링과 같은 운영 측면에서 복잡성이 증가할 수 있다.

- 분산 시스템의 복잡성 : 서비스가 분산되어 있기 때문에 네트워크 문제, 실패 처리 및 트랜잭션 관리와 같은 분산 시스템의 고유한 문제가 발생할 수 있음

- 테스트 및 디버깅의 어려움 : 다수의 서비스가 상호작용하므로 전체 시스템의 테스트와 디버깅이 복잡해질 수 있다. 어떤 문제가 발생하더라도 어떤 서비스가 원인인지, 다른 문제와 연관이 있는지 등을 찾는데 어려움이 따른다.

- 개발자 요구 사항 : 분산 아키텍처에 대한 이해가 필요하며, 더 많은 인프라 및 운영 요구 사항이 필요할 수 있다.

![Alt text](image-34.png)

![Alt text](image-35.png)

![Alt text](image-36.png)

### 정리

- 개발복잡도 ⬇, 운영복잡도 ⬆
  - 개발자가 적은 회사의 경우, 개발 시간보다 관리 시간/비용이 더 들 수 있음

![Alt text](image-37.png)

## 참고
> - [마이크로서비스가 뭔데 유행임](https://www.youtube.com/watch?v=ZRpsB3ODr6M&ab_channel=%EC%BD%94%EB%94%A9%EC%95%A0%ED%94%8C)
> - [[MSA 개념 정립하기] MSA의 개념과 장단점](https://waspro.tistory.com/429)
